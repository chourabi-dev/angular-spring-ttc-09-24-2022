<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Intervention</h1>
    <a routerLink="/vehicules" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-arrow-left fa-sm text-white-50"></i> Back</a>
</div>



<div class="mt-5">
    <div class="card">
        <div class="card-body">


            <h3>Add new intervention</h3>
            
            <form [formGroup]="form" (ngSubmit)="saveData()">

                  
                

                <div class="form-group mb-3">
                    <label for="">Category</label>
                    <select  class="form-control" formControlName="category">
                        <option value="">Please choose a category</option>
                        <option [value]="c.id" *ngFor="let c of categories">{{ c.name }}</option>
                    </select>
                </div>


                <div class="form-group mb-3">
                    <label for="">Employee</label>
                    <select  class="form-control" formControlName="employee">
                        <option value="">Please choose an employee</option>
                        <option [value]="e.id" *ngFor="let e of employees">{{ e.fullname }}</option>
                    </select>
                </div>



                
                <div class="form-group mb-3">
                    <label for="">Descreption</label>
                    <textarea  class="form-control" formControlName="descreption" rows="5"></textarea>
                </div>

                <div class="form-group mb-3">
                    <label for="">Price</label>
                    <input type="number"  class="form-control" formControlName="price"  /> 
                </div>

                
 

                <div class="form-group mb-3">
                    <button type="submit" class="btn btn-primary" [disabled]="! form.valid" >Save</button>
                </div>


                <div class="alert alert-success" *ngIf="successMessage != '' ">
                    {{ successMessage }}
                </div>

                <div class="alert alert-danger" *ngIf="errorMessage != '' ">
                    {{ errorMessage }}
                </div> 
                
                
                
            </form>
            


             
        </div>
    </div>





    <div class="card mt-3">
        <div class="card-body">
            <h3>Historic</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Category</th>
                        <th>Employee</th>
                        <th>Date</th>
                        <th>Descpreption</th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let i of interventions">
                        <td>{{ i.id }}</td>
                        <td>{{ i.category.name }}</td>
                        <td>{{ i.employee.fullname }}</td>
                        
                        <td>{{ i.createdAt | date:'medium' }}</td>
                        <td>{{ i.descreption }}</td>
                        <td>{{ i.price | currency }}</td> 
                        
                    </tr>

                    <tr>
                        <th colspan="5" class="text-center">Total</th>
                        <td>
                            {{ total  | currency }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>